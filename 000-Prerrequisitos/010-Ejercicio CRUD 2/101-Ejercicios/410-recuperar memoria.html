<!doctype html>
<html>
  <head>
    <title></title>
    <meta charset="utf-8">
    <style>
      /* ===== Design tokens ===== */
      :root{
        --bg: hsl(220 15% 10%);
        --panel: hsl(220 20% 14%);
        --panel-2: hsl(220 18% 16%);
        --text: hsl(210 20% 98%);
        --muted: hsl(220 10% 70%);
        --accent: hsl(199 90% 56%);
        --accent-2: hsl(213 90% 62%);
        --success: hsl(142 60% 45%);
        --danger: hsl(2 85% 62%);
        --ring: hsla(199, 90%, 56%, .35);
        --radius: 14px;
        --shadow: 0 10px 30px rgba(0,0,0,.35);
        --shadow-sm: 0 4px 16px rgba(0,0,0,.25);
        --border: 1px solid hsl(220 18% 22%);
        --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue",
                 Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      }

      /* Light mode tweak if user prefers */
      @media (prefers-color-scheme: light){
        :root{
          --bg: hsl(210 20% 98%);
          --panel: hsl(0 0% 100%);
          --panel-2: hsl(0 0% 100%);
          --text: hsl(222 18% 16%);
          --muted: hsl(222 10% 40%);
          --accent: hsl(210 100% 52%);
          --accent-2: hsl(221 89% 63%);
          --ring: hsla(210, 100%, 52%, .32);
          --border: 1px solid hsl(220 15% 88%);
          --shadow: 0 10px 30px rgba(2,12,27,.08);
          --shadow-sm: 0 4px 16px rgba(2,12,27,.06);
        }
      }

      /* ===== Global ===== */
      *,
      *::before,
      *::after{ box-sizing: border-box; }

      html, body{
        height: 100%;
      }

      body{
        margin: 0;
        font-family: var(--font);
        color: var(--text);
        background:
          radial-gradient(1200px 600px at 10% -10%, rgba(255,255,255,.06), transparent 50%),
          radial-gradient(1200px 600px at 110% 10%, rgba(255,255,255,.05), transparent 50%),
          var(--bg);
        display: grid;
        align-content: start;
        gap: 24px;
        padding: 40px 20px 80px;
      }

      /* Center content and set widths without altering HTML */
      #formulario, table{
        width: min(980px, 100%);
        margin-inline: auto;
      }

      /* ===== Form card ===== */
      #formulario{
        background: var(--panel);
        border: var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 20px;
        display: grid;
        grid-template-columns: 1fr 1fr auto;
        gap: 14px;
        align-items: start;
      }

      #formulario input[type="text"]{
        appearance: none;
        width: 100%;
        padding: 12px 14px;
        border-radius: 10px;
        border: var(--border);
        background: var(--panel-2);
        color: var(--text);
        outline: none;
        box-shadow: inset 0 1px 0 rgba(255,255,255,.03);
        transition: border-color .2s ease, box-shadow .2s ease, transform .04s ease;
      }

      #formulario input::placeholder{
        color: var(--muted);
      }

      #formulario input:focus{
        border-color: var(--accent);
        box-shadow: 0 0 0 6px var(--ring), inset 0 1px 0 rgba(255,255,255,.03);
      }

      #formulario button{
        justify-self: end;
        padding: 12px 18px;
        border: 0;
        border-radius: 12px;
        font-weight: 700;
        letter-spacing: .2px;
        color: white;
        cursor: pointer;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        box-shadow: var(--shadow-sm);
        transition: transform .06s ease, filter .2s ease, box-shadow .2s ease;
      }

      #formulario button:hover{
        filter: brightness(1.06) saturate(1.05);
        box-shadow: 0 8px 22px rgba(0,0,0,.25);
      }

      #formulario button:active{
        transform: translateY(1px) scale(.995);
      }

      /* Small screens: stack nicely */
      @media (max-width: 720px){
        #formulario{
          grid-template-columns: 1fr;
        }
        #formulario button{
          justify-self: stretch;
        }
      }

      /* ===== Table styling ===== */
      table{
        border-collapse: separate;
        border-spacing: 0;
        width: min(980px, 100%);
        background: var(--panel);
        border: var(--border);
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: var(--shadow);
      }

      table tr:first-child th{
        position: sticky; /* stays at top if page scrolls */
        top: 0;
        background:
          linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,.02)),
          var(--panel-2);
        color: var(--text);
        text-align: left;
        font-weight: 800;
        letter-spacing: .3px;
      }

      th, td{
        padding: 14px 16px;
        border-bottom: 1px solid color-mix(in oklab, currentColor 12%, transparent);
      }

      tr:last-child td{
        border-bottom: none;
      }

      /* Zebra stripes & hover */
      table tr:nth-child(odd){
        background: color-mix(in oklab, var(--panel) 92%, black 8%);
      }

      table tr:nth-child(even){
        background: var(--panel);
      }

      table tr:hover td{
        background: color-mix(in oklab, var(--panel) 85%, var(--accent) 5%);
      }

      /* Subtle row entrance animation when table re-renders */
      @keyframes rowIn {
        from { opacity: 0; transform: translateY(6px); }
        to   { opacity: 1; transform: translateY(0); }
      }
      table tr{
        animation: rowIn .25s ease both;
      }

      /* Make columns breathe on small screens */
      @media (max-width: 560px){
        th, td{ padding: 12px 14px; }
      }

      /* ===== Focus visibility for a11y ===== */
      :focus-visible{
        outline: 0;
        box-shadow: 0 0 0 6px var(--ring) !important;
        border-color: var(--accent) !important;
        border-radius: 10px;
      }

      /* ===== Nice scrollbars (where supported) ===== */
      :root{
        scrollbar-color: color-mix(in oklab, var(--panel) 65%, var(--accent) 35%) transparent;
        scrollbar-width: thin;
      }
      ::-webkit-scrollbar{ height: 10px; width: 10px; }
      ::-webkit-scrollbar-track{ background: transparent; }
      ::-webkit-scrollbar-thumb{
        background: color-mix(in oklab, var(--panel) 60%, var(--accent) 40%);
        border-radius: 999px;
        border: 2px solid transparent;
        background-clip: padding-box;
      }

    </style>
  </head>
  <body>
    <div id="formulario">
      <input type="text" id="nombre" placeholder="Introduce el nombre">
      <input type="text" id="email" placeholder="Introduce el email">
      <button>Añadir</button> 
    </div>
    <table>
    </table>
    <div id="formularioeliminar">
      <input type="text" id="ideliminar" placeholder="Introduce el ID para eliminar">
      <button id="procesaeliminar">Eliminar</button>
    </div>
    <div id="formularioactualizar">
      <input type="text" id="idactualizar" placeholder="Introduce el ID a actualizar">
      <input type="text" id="nuevonombre" placeholder="Introduce el nuevo nombre">
      <input type="text" id="nuevoemail" placeholder="Introduce el nuevo email">
      <button id="procesaactualizar">Actualizar</button>
    </div>
    <script>
        // Creo un array vacio
        let clientes = [];
        // Y ahora si acaso hay algo en el localStorage, lo cargo
        clientes = JSON.parse(localStorage.getItem("clientes"))
        // Y redibujo la tabla
        pueblaTabla() 
        
        
        /////////////////// CREATE ///////////////////////////
        
        // Selecciono el boton
        let boton = document.querySelector("button")
        // Si pulso el boton, se añade el registro
        boton.onclick = function(){
          anadeRegistro()
        }
        // Si pulso una tecla
        document.onkeypress = function(event){
          // Y la tecla es la tecla enter
          if(event.key == "Enter"){
            anadeRegistro() // En ese caso se añade el registro
          }
        }
        function anadeRegistro(){
          // Atrapo el nombre
          let nombre = document.querySelector("#nombre").value
          // Atrapo el email
          let email = document.querySelector("#email").value
          // Añado el cliente actual al array
          clientes.push({"nombre":nombre,"email":email})
          // Lo saco por consola
          console.log(clientes)
          // Borramos los campos
          document.querySelector("#nombre").value = ""
          document.querySelector("#email").value = ""
          // Re-renderizo la tabla
          pueblaTabla()
        }
        /////////////////// READ ///////////////////////////
        
        function pueblaTabla(){
          // Primero creo la cabecera de la tabla
          let cadena = "<tr><th>Nombre</th><th>Email</th></tr>";
          // Repaso uno a uno los clientes
          clientes.forEach(function(cliente){
             cadena += "<tr><td>"+cliente.nombre+"</td><td>"+cliente.email+"</td></tr>"
          })
          document.querySelector("table").innerHTML = cadena
          // Persisto los datos en localStorage
          localStorage.setItem("clientes",JSON.stringify(clientes));
        }
        
        /////////////////// DELETE ///////////////////////////
        
        // Primero cojo el botón
        var botoneliminar = document.querySelector("#procesaeliminar");
        // Cuando pulso el botón
        botoneliminar.onclick = function(){
          // Tomo el id a eliminar
          let ideliminar = document.querySelector("#ideliminar").value
          // Y ahora elimino el elemento del array
          clientes.splice(ideliminar,1); /////////////// IMPORTANTE
          // Y ahora re-renderizo la tabla
          pueblaTabla();
        }
        
        /////////////////// UPDATE ///////////////////////////
        
        // Primero cojo el botón
        var botonactualizar = document.querySelector("#procesaactualizar");
        // Cuando pulso el botón
        botonactualizar.onclick = function(){
          // Primer cojo el id a actualizar
          let idactualizar = document.querySelector("#idactualizar").value
          // Ahora atrapo el dato del nuevo nombre
          let nuevonombre = document.querySelector("#nuevonombre").value
          // A continuación atrapo el dato del nuevo email
          let nuevoemail = document.querySelector("#nuevoemail").value
          // Edito el array y construyo un objeto
          clientes[idactualizar] = {"nombre":nuevonombre,"email":nuevoemail}
          // Y ahora re-renderizo la tabla
          pueblaTabla();
        }
    </script>
  </body>
</html>
